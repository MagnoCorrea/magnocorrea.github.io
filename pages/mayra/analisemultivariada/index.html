<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise Multivariada - Question√°rio de Acessibilidade Web</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstat/1.9.6/jstat.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üìä An√°lise Multivariada de Question√°rio</h1>
            <p class="subtitle">An√°lise de Acessibilidade Web com T√©cnicas Estat√≠sticas Avan√ßadas</p>
        </header>

        <!-- Upload Section -->
        <section class="upload-section" id="uploadSection">
            <div class="upload-box">
                <div class="upload-icon">üìÅ</div>
                <h2>Fa√ßa Upload do Arquivo CSV</h2>
                <p>Selecione um arquivo CSV com o question√°rio de acessibilidade</p>
                <input type="file" id="csvFile" accept=".csv" class="file-input">
                <label for="csvFile" class="upload-button">
                    <span>Escolher Arquivo</span>
                </label>
                <div id="fileName" class="file-name"></div>
                <button id="analyzeButton" class="analyze-button" style="display:none;">
                    Iniciar An√°lise
                </button>
            </div>
            
            <div class="info-box">
                <h3>‚ÑπÔ∏è Informa√ß√µes</h3>
                <ul>
                    <li>Formato: CSV com separador ponto e v√≠rgula (;)</li>
                    <li>Encoding: UTF-8</li>
                    <li>Primeira linha: Cabe√ßalhos das colunas</li>
                    <li>An√°lises: Correla√ß√£o, PCA, Clustering, t-SNE</li>
                </ul>
            </div>
        </section>

        <!-- Progress Section -->
        <section class="progress-section" id="progressSection" style="display:none;">
            <h2>‚öôÔ∏è Processando An√°lise...</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text" id="progressText">Carregando dados...</p>
        </section>

        <!-- Results Section -->
        <section class="results-section" id="resultsSection" style="display:none;">
            <!-- Navigation Tabs -->
            <div class="tabs">
                <button class="tab-button active" data-tab="overview">üìã Vis√£o Geral</button>
                <button class="tab-button" data-tab="descriptive">üìä Descritiva</button>
                <button class="tab-button" data-tab="correlation">üîó Correla√ß√£o</button>
                <button class="tab-button" data-tab="pca">üéØ PCA</button>
                <button class="tab-button" data-tab="clustering">üîµ Clustering</button>
                <button class="tab-button" data-tab="profiles">üë• Perfis</button>
                <button class="tab-button" data-tab="export">üíæ Exportar</button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Overview Tab -->
                <div id="overviewTab" class="tab-panel active">
                    <h2>üìã Vis√£o Geral dos Dados</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìù</div>
                            <div class="stat-value" id="totalResponses">0</div>
                            <div class="stat-label">Total de Respostas</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚ùì</div>
                            <div class="stat-value" id="totalQuestions">0</div>
                            <div class="stat-label">Total de Quest√µes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value" id="completeness">0%</div>
                            <div class="stat-label">Taxa de Completude</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üîµ</div>
                            <div class="stat-value" id="clustersFound">0</div>
                            <div class="stat-label">Clusters Identificados</div>
                        </div>
                    </div>
                    
                    <div class="data-preview">
                        <h3>üëÅÔ∏è Todos os Dados</h3>
                        <div class="pagination-controls">
                            <button id="prevPage" class="pagination-btn">‚Üê Anterior</button>
                            <span id="pageInfo" class="page-info">P√°gina 1</span>
                            <button id="nextPage" class="pagination-btn">Pr√≥xima ‚Üí</button>
                            <select id="rowsPerPage" class="rows-select">
                                <option value="10">10 linhas</option>
                                <option value="25" selected>25 linhas</option>
                                <option value="50">50 linhas</option>
                                <option value="100">100 linhas</option>
                            </select>
                            <span id="totalInfo" class="total-info"></span>
                        </div>
                        <div class="table-wrapper">
                            <table id="dataPreviewTable"></table>
                        </div>
                    </div>
                </div>

                <!-- Descriptive Tab -->
                <div id="descriptiveTab" class="tab-panel">
                    <h2>üìä An√°lise Descritiva 
                        <button class="info-btn" onclick="showInfo('descriptive')">‚ÑπÔ∏è Info</button>
                    </h2>
                    
                    <h3 style="margin-top: 20px; color: #667eea;">üë• Perfil Demogr√°fico</h3>
                    <div class="analysis-grid">
                        <div class="chart-box">
                            <h3>Faixa Et√°ria</h3>
                            <canvas id="ageChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Pessoa com Defici√™ncia</h3>
                            <canvas id="genderChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Escolaridade</h3>
                            <canvas id="educationChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>√Årea de Atua√ß√£o (Top 10)</h3>
                            <canvas id="areaChart"></canvas>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px; color: #667eea;">‚ôø Conhecimento e Pr√°tica em Acessibilidade</h3>
                    <div class="analysis-grid">
                        <div class="chart-box">
                            <h3>Uso de WCAG</h3>
                            <canvas id="wcagChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Apps Desenvolvidos s√£o Acess√≠veis?</h3>
                            <canvas id="appsAccessibleChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Sistemas da Empresa s√£o Acess√≠veis?</h3>
                            <canvas id="knowledgeChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Preocupa√ß√£o com Acessibilidade</h3>
                            <canvas id="concernChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Implementa√ß√£o de T√©cnicas</h3>
                            <canvas id="implementationChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Ferramentas de Valida√ß√£o (Top 8)</h3>
                            <canvas id="toolsChart"></canvas>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px; color: #667eea;">üìà Experi√™ncia e Motiva√ß√µes</h3>
                    <div class="analysis-grid">
                        <div class="chart-box">
                            <h3>Tempo de Experi√™ncia na Fun√ß√£o</h3>
                            <canvas id="experienceChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Motiva√ß√µes para Usar Ferramentas (Top 8)</h3>
                            <canvas id="difficultiesChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Correlation Tab -->
                <div id="correlationTab" class="tab-panel">
                    <h2>üîó An√°lise de Correla√ß√£o 
                        <button class="info-btn" onclick="showInfo('correlation')">‚ÑπÔ∏è Info</button>
                    </h2>
                    <div class="correlation-controls">
                        <label>
                            <input type="checkbox" id="showOnlySignificant" checked>
                            Mostrar apenas correla√ß√µes significativas (|r| > 0.3)
                        </label>
                    </div>
                    <div class="chart-container full-width correlation-matrix-container">
                        <canvas id="correlationMatrix"></canvas>
                    </div>
                    <div class="correlation-table">
                        <h3>üîù Todas as Correla√ß√µes (Ordenadas por For√ßa)</h3>
                        <p style="color: #666; font-size: 0.9em; margin-top: 10px;">
                            Total de pares de vari√°veis analisados. Use a barra de rolagem para navegar.
                        </p>
                        <div class="table-scroll-container">
                            <table id="topCorrelations"></table>
                        </div>
                    </div>
                </div>

                <!-- PCA Tab -->
                <div id="pcaTab" class="tab-panel">
                    <h2>üéØ An√°lise de Componentes Principais (PCA) 
                        <button class="info-btn" onclick="showInfo('pca')">‚ÑπÔ∏è Info</button>
                    </h2>
                    <div class="pca-grid">
                        <div class="chart-box">
                            <h3>Scree Plot - Vari√¢ncia Explicada 
                                <button class="info-btn-small" onclick="showInfo('screePlot')">‚ÑπÔ∏è</button>
                            </h3>
                            <canvas id="screePlot"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Vari√¢ncia Acumulada 
                                <button class="info-btn-small" onclick="showInfo('cumulativeVariance')">‚ÑπÔ∏è</button>
                            </h3>
                            <canvas id="cumulativeVariance"></canvas>
                        </div>
                    </div>
                    <div class="chart-container full-width">
                        <h3>Biplot - PC1 vs PC2 
                            <button class="info-btn-small" onclick="showInfo('biplot')">‚ÑπÔ∏è</button>
                        </h3>
                        <canvas id="pcaBiplot"></canvas>
                    </div>
                    <div class="pca-summary">
                        <h3>üìà Resumo da An√°lise PCA 
                            <button class="info-btn-small" onclick="showInfo('pcaSummary')">‚ÑπÔ∏è</button>
                        </h3>
                        <div id="pcaSummary"></div>
                    </div>
                </div>

                <!-- Clustering Tab -->
                <div id="clusteringTab" class="tab-panel">
                    <h2>üîµ An√°lise de Clusters 
                        <button class="info-btn" onclick="showInfo('clustering')">‚ÑπÔ∏è Info</button>
                    </h2>
                    <div class="clustering-grid">
                        <div class="chart-box">
                            <h3>M√©todo do Cotovelo 
                                <button class="info-btn-small" onclick="showInfo('elbow')">‚ÑπÔ∏è</button>
                            </h3>
                            <canvas id="elbowChart"></canvas>
                        </div>
                        <div class="chart-box">
                            <h3>Distribui√ß√£o dos Clusters 
                                <button class="info-btn-small" onclick="showInfo('clusterDist')">‚ÑπÔ∏è</button>
                            </h3>
                            <canvas id="clusterDistribution"></canvas>
                        </div>
                    </div>
                    <div class="chart-container full-width">
                        <h3>Visualiza√ß√£o dos Clusters (PCA Projection) 
                            <button class="info-btn-small" onclick="showInfo('clusterPCA')">‚ÑπÔ∏è</button>
                        </h3>
                        <canvas id="clusterVisualization"></canvas>
                    </div>
                    
                    <div class="chart-grid">
                        <div class="chart-container">
                            <h3>t-SNE Visualization 
                                <button class="info-btn-small" onclick="showInfo('tsneViz')">‚ÑπÔ∏è</button>
                            </h3>
                            <canvas id="tsneChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3>t-SNE com Clusters 
                                <button class="info-btn-small" onclick="showInfo('tsneClusters')">‚ÑπÔ∏è</button>
                            </h3>
                            <canvas id="tsneClusterChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-grid">
                        <div class="chart-container">
                            <h3>Dendrograma - Clustering Hier√°rquico 
                                <button class="info-btn-small" onclick="showInfo('dendrogram')">‚ÑπÔ∏è</button>
                            </h3>
                            <div id="dendrogramChart" style="width: 100%; height: 1100px; overflow-x: auto;"></div>
                        </div>
                        <div class="chart-container">
                            <h3>Estrutura Hier√°rquica 
                                <button class="info-btn-small" onclick="showInfo('hierarchy')">‚ÑπÔ∏è</button>
                            </h3>
                            <canvas id="hierarchyChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="cluster-profiles">
                        <h3>üìä Perfil dos Clusters 
                            <button class="info-btn-small" onclick="showInfo('clusterProfile')">‚ÑπÔ∏è</button>
                        </h3>
                        <div id="clusterProfiles"></div>
                    </div>
                </div>

                <!-- Profiles Tab -->
                <div id="profilesTab" class="tab-panel">
                    <h2>üë• An√°lise de Perfis dos Respondentes 
                        <button class="info-btn" onclick="showInfo('profiles')">‚ÑπÔ∏è Info</button>
                    </h2>
                    <div class="profiles-grid">
                        <div class="profile-card">
                            <h3>üë§ Persona 1: "O Desenvolvedor Alheio"</h3>
                            <div class="persona-details">
                                <p><strong>Caracter√≠sticas:</strong></p>
                                <ul>
                                    <li>Pouco conhecimento de WCAG</li>
                                    <li>N√£o implementa acessibilidade</li>
                                    <li>Baixa preocupa√ß√£o</li>
                                </ul>
                                <p><strong>Percentual:</strong> <span id="persona1Pct">0%</span></p>
                                <p><strong>Estrat√©gia:</strong> Sensibiliza√ß√£o e treinamento b√°sico</p>
                            </div>
                        </div>
                        <div class="profile-card">
                            <h3>üí™ Persona 2: "O Engajado"</h3>
                            <div class="persona-details">
                                <p><strong>Caracter√≠sticas:</strong></p>
                                <ul>
                                    <li>Alto conhecimento de WCAG</li>
                                    <li>Implementa sempre</li>
                                    <li>Alta preocupa√ß√£o</li>
                                </ul>
                                <p><strong>Percentual:</strong> <span id="persona2Pct">0%</span></p>
                                <p><strong>Estrat√©gia:</strong> Certifica√ß√£o e papel de lideran√ßa</p>
                            </div>
                        </div>
                        <div class="profile-card">
                            <h3>üé® Persona 3: "O Designer Consciente"</h3>
                            <div class="persona-details">
                                <p><strong>Caracter√≠sticas:</strong></p>
                                <ul>
                                    <li>Conhecimento moderado de WCAG</li>
                                    <li>Implementa ocasionalmente</li>
                                    <li>Alta preocupa√ß√£o</li>
                                </ul>
                                <p><strong>Percentual:</strong> <span id="persona3Pct">0%</span></p>
                                <p><strong>Estrat√©gia:</strong> Ferramentas e suporte pr√°tico</p>
                            </div>
                        </div>
                        <div class="profile-card">
                            <h3>üî¥ Persona 4: "Caso Especial"</h3>
                            <div class="persona-details">
                                <p><strong>Caracter√≠sticas:</strong></p>
                                <ul>
                                    <li>Perfil at√≠pico</li>
                                    <li>Respostas inconsistentes</li>
                                    <li>Outlier</li>
                                </ul>
                                <p><strong>Percentual:</strong> <span id="persona4Pct">0%</span></p>
                                <p><strong>Estrat√©gia:</strong> Investiga√ß√£o individual</p>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container full-width">
                        <h3>An√°lise Cruzada: Conhecimento √ó Implementa√ß√£o</h3>
                        <canvas id="crossAnalysis"></canvas>
                    </div>
                    
                    <h3>üî¨ Testes de Independ√™ncia Chi-Quadrado</h3>
                    <div class="chart-grid">
                        <div class="chart-container">
                            <h4>Estat√≠sticas œá¬≤</h4>
                            <canvas id="chiSquareChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h4>V de Cram√©r - For√ßa da Associa√ß√£o</h4>
                            <canvas id="cramerVChart"></canvas>
                        </div>
                    </div>
                    
                    <div id="chiSquareDetails" class="details-section"></div>
                </div>

                <!-- Export Tab -->
                <div id="exportTab" class="tab-panel">
                    <h2>üíæ Exportar Resultados</h2>
                    <div class="export-options">
                        <div class="export-card">
                            <h3>üìä Relat√≥rio Completo (HTML)</h3>
                            <p>Baixe um relat√≥rio HTML completo com todos os gr√°ficos e an√°lises</p>
                            <button class="export-button" id="exportHTML">
                                <span>üìÑ</span> Exportar HTML
                            </button>
                        </div>
                        <div class="export-card">
                            <h3>üìà Dados de Correla√ß√£o (CSV)</h3>
                            <p>Baixe a matriz de correla√ß√£o em formato CSV</p>
                            <button class="export-button" id="exportCorrelation">
                                <span>üìä</span> Exportar CSV
                            </button>
                        </div>
                        <div class="export-card">
                            <h3>üîµ Clusters (CSV)</h3>
                            <p>Baixe os dados com os clusters atribu√≠dos</p>
                            <button class="export-button" id="exportClusters">
                                <span>üîµ</span> Exportar CSV
                            </button>
                        </div>
                        <div class="export-card">
                            <h3>üìã Resumo Estat√≠stico (JSON)</h3>
                            <p>Baixe um resumo com todas as estat√≠sticas em JSON</p>
                            <button class="export-button" id="exportJSON">
                                <span>üì¶</span> Exportar JSON
                            </button>
                        </div>
                    </div>
                    
                    <div class="summary-report">
                        <h3>üìù Resumo Executivo</h3>
                        <div id="executiveSummary"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>¬© 2025 An√°lise Multivariada de Acessibilidade Web | Desenvolvido com ‚ù§Ô∏è usando JavaScript, Chart.js e PapaParse</p>
        </footer>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeInfoModal()">&times;</span>
            <h2 id="modalTitle"></h2>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="analyzer.js"></script>
    <script src="visualizations.js"></script>
    <script src="app.js"></script>
</body>
</html>
